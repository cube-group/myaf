<?php

namespace Core;
use Base\Utils\HttpUtil;

/**
 * Class ControlWeb.
 * Web Controller基类.
 * (核心类勿改)
 * @package Core
 */
abstract class ControlWeb extends Control
{
    public function init()
    {
        parent::init(); // TODO: Change the autogenerated stub
        header("server: myaf");
    }

    /**
     * 设置HTTP STATUS_CODE
     * @param $code int
     * @return $this
     */
    public function statusCode($code)
    {
        HttpUtil::statusCode($code);
        return $this;
    }

    /**
     * $_GET
     * @param null $name
     * @return bool
     */
    public function get($name = null)
    {
        if (!$name) {
            return $this->req->getQuery();
        }
        return $this->req->getQuery($name);
    }

    /**
     * $_POST
     * @param null $name
     * @return bool
     */
    public function post($name = null)
    {
        if (!$name) {
            return $this->req->getPost();
        }
        return $this->req->getPost($name);
    }

    /**
     * $_COOKIE
     * @param null $name
     * @return bool
     */
    public function cookie($name = null)
    {
        if (!$name) {
            return $this->req->getCookie();
        }
        return $this->req->getCookie($name);
    }

    /**
     * $_FILES
     * @param null $name
     * @return bool
     */
    public function files($name = null)
    {
        if (!$name) {
            return $this->req->getFiles();
        }
        return $this->req->getFiles($name);
    }

    /**
     * 下载文件.
     * @param $fileName string 下载目录下的文件名称
     */
    public function download($fileName)
    {
        if (!G::download($fileName)) {
            $this->statusCode(404)->send($fileName . ' Not Found');
        }
    }
}